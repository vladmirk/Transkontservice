<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <div th:replace="fragments/header :: header-css" />
    <title th:text="${orderForm.sR.order.orderNumber}">Edit Order</title>
  </head>
  <body>

    <div class="container">
      <div th:replace="fragments/header :: topnavbar" />
      <div class="container-fluid">

        <h3 th:text="${orderForm.sR.order.orderNumber}">Edit Order</h3>
        <form method="post" th:action="@{#}" th:object="${orderForm}">
          <div class="form-group row">
            <label for="orderDate" class="col-sm-2 col-form-label" th:text="#{editOrders.orderDate}">Order Date</label>
            <div class="col-sm-10">
              <div class="form-group">
                <input type="hidden" class="form-control" th:field="*{sR.id}" />
                <input type="hidden" class="form-control" th:field="*{sR.order.id}" />
                <div class="input-group date" id="orderDate" data-target-input="nearest">
                  <input type="text" class="form-control datetimepicker-input" data-target="#orderDate" th:field="*{sR.order.orderDate}"
                         th:errorclass="border-danger" />
                  <div class=" input-group-append" data-target="#orderDate" data-toggle="datetimepicker">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                  </div>
                </div>
              </div>
            </div>
            <script type="text/javascript">
              $(function () {
                $('#orderDate').datetimepicker({
                  locale: 'ru', format: 'L',
                  date: moment("[[${{orderForm.sR.order.orderDate}}]]", dateFormat())
                });
              });
            </script>
          </div>
          <!-- -->
          <div class="form-group row">
            <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('sR.order.expeditor')}"
                 th:errors="*{order.expeditor}"></div>
            <label th:for="order.expeditor" class="col-sm-2 col-form-label" th:text="#{editOrders.expeditor}">Order Date</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" th:id="expeditorName" th:field="*{sR.order.expeditor.name}" />
            </div>
            <div class="col-sm-3">
              <input type="text" class="form-control-plaintext border rounded pl-2" th:id="expeditorCode" th:field="*{sR.order.expeditor.code}"
                     readonly
                     tabindex="-1" />
            </div>
            <script>
              $(document).ready(function () {
                $('#expeditorName').autocomplete({
                  serviceUrl: '/suggest/expeditors',
                  // minChars: 2,
                  onSelect: function (suggestion) {
                    $('#expeditorCode').val(suggestion.data);
                    // alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
                  },
                  onSearchStart: function (params) {
                    $('#expeditorCode').val('');
                  }
                });
              });
            </script>
          </div>
          <!-- Load -->
          <div class="form-group row">
            <div class="alert alert-danger" role="alert" th:if="${#fields.hasErrors('sR.load')}"
                 th:errors="*{sR.load}"></div>
            <label th:for="srLoad" class="col-sm-2 col-form-label" th:text="#{editOrders.load}">Load</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" th:id="srLoad" th:field="*{sR.load.name}" />
              <input type="hidden" class="form-control" th:id="srLoadId" th:field="*{sR.load.id}" />
            </div>

            <script>
              $(document).ready(function () {
                $('#srLoad').autocomplete({
                  serviceUrl: '/suggest/load',
                  onSelect: function (suggestion) {
                    $('#srLoadId').val(suggestion.data);
                    // alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
                  },
                  onSearchStart: function (params) {
                    $('#srLoadId').val('');
                  }
                });
              });
            </script>
          </div>

          <div class="form-group row">
            <div class="col-sm-2">
            </div>
            <div class="col-sm-10">
              <button type="submit" class="btn btn-success ">OK</button>
            </div>
          </div>

        </form>
      </div> <!-- end of container -->
    </div> <!-- main container -->
    <div th:replace="fragments/footer :: footer" />
  </body>
</html>